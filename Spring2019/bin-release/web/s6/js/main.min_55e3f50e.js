var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}l((o=o.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,r&&(a=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,r=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){l.label=n[1];break}if(6===n[0]&&l.label<a[1]){l.label=a[1],a=n;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(n);break}a[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(o){n=[6,o],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,r,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Enemy=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(egret.Sprite);__reflect(Enemy.prototype,"Enemy");var GoldenCoin=function(e){function t(t){var n=e.call(this)||this;return n.val=t,n.base_money_num=1e4,n.name="goldencoin",n.creatShape(t),n}return __extends(t,e),t.prototype.creatShape=function(e){switch(e){case 10:this.btm_tool=PlayScene.getToolBitmap("dj_glod_10_png");break;case 100:this.btm_tool=PlayScene.getToolBitmap("gold_bai_png");break;case 1e3:this.btm_tool=PlayScene.getToolBitmap("gold_qian_png");break;case 1e4:this.btm_tool=PlayScene.getToolBitmap("gold_yy_png");break;case 1e5:this.btm_tool=PlayScene.getToolBitmap("gold_sy_png");break;case 1e6:this.btm_tool=PlayScene.getToolBitmap("gold_sy_png")}this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){var n=new eui.Label,o=t.val;e.p_role.addChild(n),n.size=13,n.textColor=16776960,1==e.nagetive_status[Ns.SkullCoin]&&(o=0),1==e.positive_status?"dj_double_png"==e.positive_name&&(n.text="+"+o+"0000x2"):n.text="+"+o+"0000",n.x=e.p_role.width/2-n.width/2,n.y=-5,e.add_coin_arr.push(n)},t.prototype.skill=function(e,t){console.log("吃到 金币"),PlaySceneSoundController.startMuisc("resource/act/media/jinbi.mp3");var n=t.val;1==e.positive_status&&"dj_double_png"==e.positive_name&&(n=2*t.val),1==e.nagetive_status[Ns.SkullCoin]&&(n=0),e.score+=n,e.score>9999?e.p_score.text=e.score/1e4+"亿":e.p_score.text=e.score+"万";var o=e.score/1e4;console.log(o),0==e.surpass_flag_one&&o>80&&100>o?(e.group_surpass.visible=!0,e.lbl_surpass.text="你超过了雷军",e.surpass_flag_one=!0,this.showSurpass(e)):0==e.surpass_flag_two&&o>100&&110>o?(e.group_surpass.visible=!0,e.lbl_surpass.text="你超过了李彦宏",e.surpass_flag_two=!0,this.showSurpass(e)):0==e.surpass_flag_three&&o>110&&120>o?(e.group_surpass.visible=!0,e.lbl_surpass.text="你超过了严昊",e.surpass_flag_three=!0,this.showSurpass(e)):0==e.surpass_flag_four&&o>120&&130>o?(e.group_surpass.visible=!0,e.lbl_surpass.text="你超过了王卫",e.surpass_flag_four=!0,this.showSurpass(e)):0==e.surpass_flag_five&&o>130&&140>o?(e.group_surpass.visible=!0,e.lbl_surpass.text="你超过了何享健",e.surpass_flag_five=!0,this.showSurpass(e)):0==e.surpass_flag_six&&o>140&&150>o?(e.group_surpass.visible=!0,e.lbl_surpass.text="你超过了王健林",e.surpass_flag_six=!0,this.showSurpass(e)):0==e.surpass_flag_seven&&o>150&&240>o?(e.group_surpass.visible=!0,e.lbl_surpass.text="你超过了杨惠妍",e.surpass_flag_seven=!0,this.showSurpass(e)):0==e.surpass_flag_eight&&o>240&&250>o?(e.group_surpass.visible=!0,e.lbl_surpass.text="你超过了马化腾",e.surpass_flag_eight=!0,this.showSurpass(e)):0==e.surpass_flag_nine&&o>250&&270>o?(e.group_surpass.visible=!0,e.lbl_surpass.text="你超过了许家印",e.surpass_flag_nine=!0,this.showSurpass(e)):0==e.surpass_flag_ten&&o>270&&(e.group_surpass.visible=!0,e.lbl_surpass.text="你超过了马云",e.surpass_flag_ten=!0,this.showSurpass(e))},t.prototype.showSurpass=function(e){var t=new egret.Timer(1e3,10);t.addEventListener(egret.TimerEvent.TIMER,function(){e.group_surpass.alpha=e.group_surpass.alpha-.1},this),t.addEventListener(egret.TimerEvent.TIMER_COMPLETE,function(){e.group_surpass.alpha=1,e.group_surpass.visible=!1},this),t.start()},t}(Enemy);__reflect(GoldenCoin.prototype,"GoldenCoin");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){var e=RES.getRes("bg_home_light_jpg"),t=new egret.Bitmap;t.texture=e;var n=RES.getRes("nafulou_png"),o=new egret.Bitmap;o.texture=n;var i=RES.getRes("mygoldpig_png"),r=new egret.Bitmap;r.texture=i,this.addChild(t),t.x=0,t.y=0,t.width=375,t.height=667,this.addChild(o),o.x=0,o.y=-10,o.width=375,o.height=125,this.addChild(r),this.textField=new egret.TextField,this.addChild(this.textField),this.textField.width=300,this.textField.height=50,this.textField.x=187.5-this.textField.width/2,this.textField.y=533.6,this.textField.size=18,this.textField.textAlign="center",SoundController.instance,PlaySceneSoundController.instance,SoundController.startMuisc("resource/act/media/ppkdc.mp3");var a=localStorage.getItem("uid");a||(location.href=localStorage.getItem("entry_url")),HttpServerSo.requestPost("way=re_user&uid="+a,function(e){""==e?localStorage.setItem("re_uname",""):localStorage.setItem("re_uname",e)}),HttpServerSo.requestPost("way=init&uid="+a,function(e){if("ok"==e);else if("no_user"==e)location.href=localStorage.getItem("entry_url");else{var t=JSON.parse(e),n=t.username;t.realName.length>0&&(n=t.realName),localStorage.setItem("uname",n),localStorage.setItem("username",t.username),localStorage.setItem("realName",t.realName),localStorage.setItem("avatar",t.avatar),localStorage.setItem("revive_num",t.tool_revive),localStorage.setItem("clean_num",t.tool_drug),localStorage.setItem("shield_num",t.tool_shield),localStorage.setItem("double_num",t.tool_dbcoin),localStorage.setItem("speed_num",t.tool_regular_speed)}})},t.prototype.onProgress=function(e,t){var n=Math.floor(e/t*100);this.textField.text=n+"%"},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=t.sent(),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,6,,7]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,RES.loadGroup("loading")];case 2:return n.sent(),e=new LoadingUI,this.stage.addChild(e),[4,this.loadTheme()];case 3:return n.sent(),[4,RES.loadGroup("playing")];case 4:return n.sent(),[4,RES.loadGroup("preload",0,e)];case 5:return n.sent(),this.stage.removeChild(e),[3,7];case 6:return t=n.sent(),console.error(t),[3,7];case 7:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,n){var o=new eui.Theme("resource/default.thm.json",e.stage);o.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){SceneManager.instance.setStage(this),SceneManager.toMainScene()},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t},t.prototype.startAnimation=function(e){var t=this,n=new egret.HtmlTextParser,o=e.map(function(e){return n.parse(e)}),i=this.textfield,r=-1,a=function(){r++,console.log("start animation : "+r),r>=o.length&&(r=0);var e=o[r];i.textFlow=e;var n=egret.Tween.get(i);n.to({alpha:1},200),n.wait(2e3),n.to({alpha:0},200),n.call(a,t)};a()},t.prototype.onButtonClick=function(e){var t=new eui.Panel;t.title="Title",t.horizontalCenter=0,t.verticalCenter=0,this.addChild(t)},t}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,o){function i(e){t.call(o,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),n.call(o))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(o,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,n){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(o,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var s=e.split("/");s.pop();var l=s.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(o,generateJSON.paths[e])},this):RES.getResByUrl(l,function(n){window.JSONParseClass.setData(n),egret.callLater(function(){t.call(o,generateJSON.paths[e])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(o,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var PlaySceneSoundController=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.startMuisc=function(e){var t=new egret.Sound,e=e;t.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),t.load(e)},t.onLoadComplete=function(e){var t=e.target;this.soundChannel=t.play(0,1),console.log("播放")},t.stopNow=function(){this.soundChannel.stop()},t}(egret.DisplayObjectContainer);__reflect(PlaySceneSoundController.prototype,"PlaySceneSoundController");var RequestData=function(){function e(){}return e.testAwait=function(){setTimeout(function(){console.log("=========---===========0")},1e3)},e.canPlay=function(){var e=this,t=localStorage.getItem("uid"),n="way=getPlaytimes&uid="+t;return new Promise(function(t,o){e.userFunc=e.getTimesComplete.bind(!1,t),HttpServerSo.requestPost(n,e.userFunc)})},e.increasePlaytimes=function(){var e=localStorage.getItem("uid"),t="way=increasePlaytimes&uid="+e;HttpServerSo.requestPost(t,this.increaseComplete)},e.getTimesComplete=function(e,t){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(o){return n=parseInt(t),localStorage.setItem("current_tiems",n+""),e(""+n),[2]})})},e.increaseComplete=function(e){console.log("res : "+e)},e}();__reflect(RequestData.prototype,"RequestData");var SoundController=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return this.my_instance||(this.my_instance=new t),this.my_instance},enumerable:!0,configurable:!0}),t.startMuisc=function(e){var t=new egret.Sound,e=e;t.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),t.load(e)},t.onLoadComplete=function(e){var t=e.target;this.soundChannel=t.play(0),console.log("播放")},t.stopNow=function(){this.soundChannel.stop()},t}(egret.DisplayObjectContainer);__reflect(SoundController.prototype,"SoundController");var SceneManager=function(e){function t(){var t=e.call(this)||this;return t._max_play_times=20,t.mainScene=new MainScene,t.playScene=new PlayScene,t.ruleScene=new RuleScene,t.storeScene=new StoreScene,t.rankScene=new RankScene,t.recordScene=new RecordScene,t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return this.sceneManager||(this.sceneManager=new t),this.sceneManager},enumerable:!0,configurable:!0}),t.prototype.setStage=function(e){this._stage=e},t.toMainScene=function(){"playScene"==SoundController.cu_scene&&(SoundController.stopNow(),SoundController.startMuisc("resource/act/media/ppkdc.mp3"),SoundController.cu_scene="mainScene");var e=this.instance.mainScene;e.parent||this.instance._stage.addChild(e),e.showStatus(),t.instance.removeOther(e)},t.toPlayScene=function(){return __awaiter(this,void 0,void 0,function(){var e,n,o;return __generator(this,function(i){switch(i.label){case 0:return[4,RequestData.canPlay()];case 1:return e=i.sent(),parseInt(e)>t.instance._max_play_times?(this.instance.mainScene.cannotplayNow(),[2]):(n=localStorage.getItem("re_uname"),""!=n?(this.instance.mainScene.showRename(n),[2]):(SoundController.cu_scene="playScene",SoundController.stopNow(),SoundController.startMuisc("resource/act/media/mali.mp3"),this.instance.playScene=new PlayScene,o=this.instance.playScene,this.instance.mainScene.addChild(o),[2]))}})})},t.toRuleScene=function(){this.instance.ruleScene=new RuleScene;var e=this.instance.ruleScene;this.instance.removeOther(e),this.instance.mainScene.addChild(e)},t.toStoreScene=function(){this.instance.storeScene=new StoreScene;var e=this.instance.storeScene;console.log("-1-"),this.instance.removeOther(e),this.instance.mainScene.addChild(e)},t.toRankScene=function(){this.instance.rankScene=new RankScene;var e=this.instance.rankScene;this.instance.removeOther(e),this.instance.mainScene.addChild(e)},t.toRecordScene=function(){this.instance.recordScene=new RecordScene;var e=this.instance.recordScene;this.instance.removeOther(e),this.instance.mainScene.addChild(e)},t.prototype.removeOther=function(e){var t=this,n=[this.playScene,this.ruleScene,this.storeScene,this.rankScene,this.recordScene];n.forEach(function(n,o){e!==n&&n.parent&&t.mainScene.removeChild(n)})},t}(eui.UILayer);__reflect(SceneManager.prototype,"SceneManager");var Bomb=function(e){function t(){var t=e.call(this)||this;return t.name="bomb",t.val=0,t.creatShape(),t}return __extends(t,e),t.prototype.creatShape=function(){this.btm_tool=PlayScene.getToolBitmap("dj_zd114_png"),this.addChild(this.btm_tool)},t.prototype.isAgain=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,o,i;return __generator(this,function(r){return this.settleAccounts(e),e.over_group.visible=!0,t=parseInt(localStorage.getItem("current_tiems"))+1,console.log("bomb now times : "+t),t>SceneManager.instance._max_play_times?(localStorage.setItem("current_tiems",t+""),RequestData.increasePlaytimes(),SceneManager.toMainScene(),SceneManager.instance.mainScene.cannotplayNow(),[2]):(localStorage.setItem("current_tiems",t+""),e.lbl_times.text=t+"/20",RequestData.increasePlaytimes(),n=localStorage.getItem("uname"),e.congratulation_labe.text="恭喜您，"+n,o=0,e.score>9999?(o=e.score/1e4,e.res_unit.text="亿"):(o=e.score,e.res_unit.text="万"),i=new eui.Label,e.over_group.addChild(i),i.size=42,i.textColor=16776960,i.text=o+"",i.x=e.over_group.width/2-i.width/2,i.y=342,e.res_unit.x=i.x+i.width+2,e.setChildIndex(e.over_group,e.numChildren),this.againFunc=this.btnAgainFunc.bind(!1,e,i,this),e.btn_again.addEventListener(egret.TouchEvent.TOUCH_TAP,this.againFunc,this),e.btn_buy_tool.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManager.toStoreScene(),SceneManager.instance.mainScene.toggleBtn(0)},this),e.icon_endclose.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManager.instance.mainScene.toggleBtn(0),SceneManager.toMainScene(),e.over_group.visible=!1},this),[2])})})},t.prototype.onStatus=function(e,t){if(!e.onShield){e.cleanAllNagetive(),e.closePositive(),e.isPause=!0;var n=e.p_heart_num.text,o=parseInt(n.slice(1));0==o?this.isAgain(e):(e.relife_group.visible=!0,e.setChildIndex(e.relife_group,e.numChildren),this.fun=this.reviveEventMethod.bind(!1,e,o,this),e.pbtn_relife.addEventListener(egret.TouchEvent.TOUCH_TAP,this.fun,this),this.nofuc=this.norelife.bind(!1,e,this),e.pbtn_over_now.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nofuc,this))}},t.prototype.skill=function(e,t){console.log("吃到 炸弹"),PlaySceneSoundController.startMuisc("resource/act/media/xiaochu.mp3"),e.onShield||(e.nagetive_status[Ns.Lock]=!0)},t.prototype.settleAccounts=function(e){var t=localStorage.getItem("uid"),n=e.score,o=parseInt(e.p_heart_num.text.slice(1)),i=parseInt(e.cleansing_num.text.slice(1)),r=parseInt(e.shield_num.text.slice(1)),a=parseInt(e.double_num.text.slice(1)),s=parseInt(e.common_num.text.slice(1)),l="way=settleAccounts&uid="+t+"&score="+n+"&heart="+o+"&clean="+i+"&shield="+r+"&double="+a+"&speed="+s;HttpServerSo.requestPost(l,this.postComplete)},t.prototype.postComplete=function(e){},t.prototype.btnAgainFunc=function(e,t,n){console.log("再来一次.."),console.log(n),e.over_group.visible=!1,e.isPause=!1,e.speed_index=0,e.speed_level=0,t.text="",e.constructor_init(!1),e.p_score.text="0万",e.btn_again.removeEventListener(egret.TouchEvent.TOUCH_TAP,n.againFunc,n)},t.prototype.reviveEventMethod=function(e,t,n){console.log("复活了.."),e.userDatabaseTool("revive"),e.p_heart_num.text="x"+(parseInt(t)-1),e.isPause=!1,e.relife_group.visible=!1,e.nagetive_status[Ns.Lock]=!1,e.pbtn_over_now.removeEventListener(egret.TouchEvent.TOUCH_TAP,n.nofuc,n),e.pbtn_relife.removeEventListener(egret.TouchEvent.TOUCH_TAP,n.fun,n)},t.prototype.norelife=function(e,t){t.isAgain(e),e.pbtn_over_now.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.nofuc,t)},t}(Enemy);__reflect(Bomb.prototype,"Bomb");var Cleansing=function(e){function t(t){var n=e.call(this)||this;return n.val=t,n.base_money_num=1e4,n.name="cleansing",n.creatShape(t),n}return __extends(t,e),t.prototype.creatShape=function(e){this.btm_tool=PlayScene.getToolBitmap("dj_ss114_png"),this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){e.cleanAllNagetive()},t.prototype.skill=function(e,t){console.log("吃到 净化"),PlaySceneSoundController.startMuisc("resource/act/media/xiaochu.mp3")},t}(Enemy);__reflect(Cleansing.prototype,"Cleansing");var CommonSpeed=function(e){function t(){var t=e.call(this)||this;return t.name="commonspeed",t.val=0,t.creatShape(),t}return __extends(t,e),t.prototype.creatShape=function(){this.btm_tool=new egret.Bitmap,this.btm_tool=PlayScene.getToolBitmap("dj_time114_png"),this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){e.showPositiveBar("dj_time88_png")},t.prototype.skill=function(e,t){console.log("吃到 匀速"),PlaySceneSoundController.startMuisc("resource/act/media/xiaochu.mp3"),e.down_speed=5,e.create_tool_speed=20,e.common_speed_flag=!0},t}(Enemy);__reflect(CommonSpeed.prototype,"CommonSpeed");var DoubleCoin=function(e){function t(){var t=e.call(this)||this;return t.name="doublecoin",t.val=0,t.creatShape(),t}return __extends(t,e),t.prototype.creatShape=function(){this.btm_tool=PlayScene.getToolBitmap("dj_gold_double_png"),this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){e.showPositiveBar("dj_double_png")},t.prototype.skill=function(e,t){console.log("吃到 双倍"),PlaySceneSoundController.startMuisc("resource/act/media/xiaochu.mp3")},t}(Enemy);__reflect(DoubleCoin.prototype,"DoubleCoin");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function o(o){t.call(n,o,e)}if(RES.hasRes(e)){var i=RES.getRes(e);i?o(i):RES.getResAsync(e,o,this)}else RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var LoadingUIs=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.width=300,this.textField.height=50,this.textField.x=187.5-this.textField.width/2,this.textField.y=533.6,this.textField.size=18,this.textField.textAlign="center",console.log("--")},t.prototype.onProgress=function(e,t){var n=Math.floor(e/t*100);this.textField.text=n+"%"},t}(egret.Sprite);__reflect(LoadingUIs.prototype,"LoadingUIs",["RES.PromiseTaskReporter"]);var GoldPig=function(e){function t(t){var n=e.call(this)||this;return n.pig=t,n}return __extends(t,e),Object.defineProperty(t.prototype,"init_x",{get:function(){return this._init_x},set:function(e){this._init_x=e},enumerable:!0,configurable:!0}),t.prototype.move=function(e,t){var n=e.stageX,o=n-this.init_x;t.x+o<-15?t.x=-15:t.x+o>=SceneManager.instance._stage.stage.stageWidth-t.width+15?t.x=SceneManager.instance._stage.stage.stageWidth-t.width+15:t.x+=o,this.init_x=n},t.prototype.skill=function(){},t}(egret.Sprite);__reflect(GoldPig.prototype,"GoldPig");var Heart=function(e){function t(){var t=e.call(this)||this;return t.name="heart",t.val=0,t.creatShape(),t}return __extends(t,e),t.prototype.creatShape=function(){this.btm_tool=PlayScene.getToolBitmap("dj_life114_png"),this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){},t.prototype.skill=function(e,t){console.log("吃到 复活"),PlaySceneSoundController.startMuisc("resource/act/media/xiaochu.mp3")},t}(Enemy);__reflect(Heart.prototype,"Heart");var Lightning=function(e){function t(){var t=e.call(this)||this;return t.name="lightning",t.val=0,t.creatShape(),t}return __extends(t,e),t.prototype.creatShape=function(){this.btm_tool=PlayScene.getToolBitmap("dj_lightening114_png"),this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){e.onShield||(e.nagetive_status[Ns.Lightning]=!0,e.nagetive_index[Ns.Lightning]=0,e.nagetive_group.addChild(e.nagetive_shapes[Ns.Lightning]),e.nicon_lightning.visible||(e.nicon_lightning.visible=!0),e.per_name.visible&&(e.per_name.visible=!1))},t.prototype.skill=function(e,t){e.current_speed=e.down_speed,e.down_speed+=6,PlaySceneSoundController.startMuisc("resource/act/media/xiaochu.mp3")},t}(Enemy);__reflect(Lightning.prototype,"Lightning");var Lock=function(e){function t(){var t=e.call(this)||this;return t.name="lock",t.val=0,t.creatShape(),t}return __extends(t,e),t.prototype.creatShape=function(){this.btm_tool=PlayScene.getToolBitmap("dj_lock114_png"),this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){e.onShield||(e.nagetive_status[Ns.Lock]=!0,e.nagetive_index[Ns.Lock]=0,e.nagetive_group.addChild(e.nagetive_shapes[Ns.Lock]),e.nicon_lock.visible||(e.nicon_lock.visible=!0),e.per_name.visible&&(e.per_name.visible=!1))},t.prototype.skill=function(e,t){console.log("吃到 锁"),PlaySceneSoundController.startMuisc("resource/act/media/xiaochu.mp3")},t}(Enemy);__reflect(Lock.prototype,"Lock");var Shield=function(e){function t(){var t=e.call(this)||this;return t.name="shield",t.val=0,t.creatShape(),t}return __extends(t,e),t.prototype.creatShape=function(){this.btm_tool=PlayScene.getToolBitmap("dj_sh114_png"),this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){e.showPositiveBar("dj_sh88_png")},t.prototype.skill=function(e,t){console.log("吃到 护盾"),e.onShield=!0,e.img_light_shield.visible=!0,PlaySceneSoundController.startMuisc("resource/act/media/xiaochu.mp3")},t}(Enemy);__reflect(Shield.prototype,"Shield");var SkullCoin=function(e){function t(){var t=e.call(this)||this;return t.name="skullcoin",t.val=0,t.creatShape(),t}return __extends(t,e),t.prototype.creatShape=function(){this.btm_tool=PlayScene.getToolBitmap("gold_cod_png"),this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){e.onShield||(e.nagetive_status[Ns.SkullCoin]=!0,e.nagetive_index[Ns.SkullCoin]=0,e.nagetive_group.addChild(e.nagetive_shapes[Ns.SkullCoin]),e.nicon_skullcoin.visible||(e.nicon_skullcoin.visible=!0),e.per_name.visible&&(e.per_name.visible=!1))},t.prototype.skill=function(e,t){console.log("吃到 骷髅"),PlaySceneSoundController.startMuisc("resource/act/media/xiaochu.mp3")},t}(Enemy);__reflect(SkullCoin.prototype,"SkullCoin");var HttpServerSo=function(){function e(){}return e.requestPost=function(e,t,n){var o=new egret.HttpRequest;o.responseType=egret.HttpResponseType.TEXT,o.open("http://www.le626.com/index.st/Game/vgame",egret.HttpMethod.POST),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(e),o.addEventListener(egret.Event.COMPLETE,function(e){var o=e.currentTarget;t(o.response,n)},this),o.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){},this),o.addEventListener(egret.ProgressEvent.PROGRESS,function(e){},this)},e.requestGet=function(){console.log("get")},e}();__reflect(HttpServerSo.prototype,"HttpServerSo");var MainScene=function(e){function t(){var t=e.call(this)||this;return console.log(SoundController.soundChannel),t}return __extends(t,e),t.prototype.partAdded=function(t,n){e.prototype.partAdded.call(this,t,n)},t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.group_mbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){if(e.target.numElements)return void console.log("未点到按钮！");var n=e.target;n.selected?t.toggleBtn(n):n.selected=!0},this),this.mbtn_start.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManager.toPlayScene()},this)},t.prototype.restoreStatus=function(){var e=this;localStorage.setItem("main_status","false"),localStorage.setItem("buy_type",""),localStorage.setItem("buy_tname","");var t=new egret.Timer(1e3,1);t.addEventListener(egret.TimerEvent.TIMER,function(){e.group_line.visible=!1},this),t.start()},t.prototype.cannotplayNow=function(){var e=this;this.alert_not_enough.visible=!0;var t=new egret.Timer(3e3,1);t.addEventListener(egret.TimerEvent.TIMER_COMPLETE,function(){e.alert_not_enough.visible=!1},this),t.start()},t.prototype.showRename=function(e){var t=this;this.label_reuser.text="请使用"+e+"帐户进行游戏~",this.group_reuser.visible=!0;var n=new egret.Timer(2e3,1);n.addEventListener(egret.TimerEvent.TIMER_COMPLETE,function(){t.group_reuser.visible=!1},this),n.start()},t.prototype.showStatus=function(){var e=localStorage.getItem("main_status");if("true"==e){var t=localStorage.getItem("type");if("buy_tool"==t){var n=localStorage.getItem("buy_tname"),o=void 0;if(n.length>0){switch(this.group_line.visible=!0,n){case"sbjb":o=parseInt(localStorage.getItem("double_num"))+1,localStorage.setItem("double_num",o+""),this.font_two.text="“双倍金币” 一份~";break;case"fhzx":o=parseInt(localStorage.getItem("revive_num"))+1,localStorage.setItem("revive_num",o+""),this.font_two.text="“复活之心” 一份~";break;case"jhys":o=parseInt(localStorage.getItem("clean_num"))+1,localStorage.setItem("clean_num",o+""),this.font_two.text="“净化圣水” 一份~";break;case"zcls":o=parseInt(localStorage.getItem("speed_num"))+1,localStorage.setItem("speed_num",o+""),this.font_two.text="“正常流速” 一份~";break;case"shzd":o=parseInt(localStorage.getItem("shield_num"))+1,localStorage.setItem("shield_num",o+""),this.font_two.text="“守护之盾” 一份~"}this.restoreStatus()}}}},t.prototype.toggleBtn=function(e){if(this.group_mbtn.$children.forEach(function(t){e!==t&&(e=e,t.selected=!1)}),0===e)return this.setChildIndex(this.group_mbtn,this.numChildren),void console.log("back");var t=this.group_mbtn.getChildIndex(e);switch(t){case 0:SceneManager.toRuleScene(),this.setChildIndex(this.group_mbtn,this.numChildren);break;case 1:SceneManager.toStoreScene(),this.setChildIndex(this.group_mbtn,this.numChildren);break;case 2:SceneManager.toRankScene(),this.setChildIndex(this.group_mbtn,this.numChildren)}},t}(eui.Component);__reflect(MainScene.prototype,"MainScene",["eui.UIComponent","egret.DisplayObject"]);var Ns;!function(e){e[e.SkullCoin=0]="SkullCoin",e[e.Lightning=1]="Lightning",e[e.Lock=2]="Lock"}(Ns||(Ns={}));var NonSustain;!function(e){e[e.bomb=0]="bomb",e[e.goldencoin=1]="goldencoin"}(NonSustain||(NonSustain={}));var PlayScene=function(_super){function PlayScene(){var e=_super.call(this)||this;return e.start_index=1,e.start_flag=!1,e._score=0,e.enemy_list=[],e._PI=Math.PI,e._oneDegree=Math.PI/180,e.surpass_flag_one=!1,e.surpass_flag_two=!1,e.surpass_flag_three=!1,e.surpass_flag_four=!1,e.surpass_flag_five=!1,e.surpass_flag_six=!1,e.surpass_flag_seven=!1,e.surpass_flag_eight=!1,e.surpass_flag_nine=!1,e.surpass_flag_ten=!1,e.common_speed_flag=!1,e.golden_coin_rate=10,e.commom_speed_rate=0,e.double_coin_rate=0,e.heart_rate=0,e.lightning_rate=0,e.skull_coin_rate=0,e.lock_rate=0,e.shield_rate=0,e.bomb_rate=0,e.cleansing=0,e.eatedFlag=!1,e.level_seconds=2,e.thirty_seconds_level_seconds=3,e.temp_level=0,e.constructor_init(!0),e}return __extends(PlayScene,_super),PlayScene.prototype.initData=function(){this.p_heart_num.text="x"+localStorage.getItem("revive_num"),this.cleansing_num.text="x"+localStorage.getItem("clean_num"),this.shield_num.text="x"+localStorage.getItem("shield_num"),this.double_num.text="x"+localStorage.getItem("double_num"),this.common_num.text="x"+localStorage.getItem("speed_num")},PlayScene.prototype.constructor_init=function(e){var t=this;this._findex=0,console.log(this.enemy_list),this.enemy_list.length>0&&this.enemy_list.forEach(function(e){t.removeEnemy(e)}),this.score=0,this.create_tool_speed=30,this.down_speed=3,this.positive_status=!1,this._positive_time=90,this._positive_index=0,this.positive_name="none",this._nagetive_time=90,this.nagetive_status=[!1,!1,!1],this.nagetive_index=[0,0,0],this.nagetive_shapes=[new egret.Shape,new egret.Shape,new egret.Shape],this._nagetive_radius=15,this.onShield=!1,e&&(this.isPause=!1,this.speed_index=0,this.speed_level=0),e||this.relife_group.visible&&(this.relife_group.visible=!1),this.light_rotation_angle=0,this.add_coin_arr=[]},Object.defineProperty(PlayScene.prototype,"score",{get:function(){return this._score},set:function(e){this._score=e},enumerable:!0,configurable:!0}),PlayScene.prototype.childrenCreated=function(){var e=this;_super.prototype.childrenCreated.call(this),this.initData(),this.init_me(),this.lbl_times.text=localStorage.getItem("current_tiems")+"/20",this.pbtn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.isPause=!0,SceneManager.toMainScene()},this),this.group_tool.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickToolGroup,this);var t=new egret.Timer(1e3,4);this.pre_start.visible=!0,t.addEventListener(egret.TimerEvent.TIMER,function(){e.start_index++,2==e.start_index?e.pre_start.texture=RES.getRes("two_png"):3==e.start_index?e.pre_start.texture=RES.getRes("one_png"):4==e.start_index?e.pre_start.texture=RES.getRes("go_png"):5==e.start_index&&(e.pre_start.visible=!1,e.addEventListener(egret.Event.ENTER_FRAME,e.onEnterFrame,e),e.randomGetTool())},this),t.start()},PlayScene.prototype.partAdded=function(e,t){_super.prototype.partAdded.call(this,e,t)},PlayScene.prototype.init_me=function(){var e=this;this.gold_pig=new GoldPig(this.pig),this.per_name.text=localStorage.getItem("username"),this.nagetive_icons=[this.nicon_skullcoin,this.nicon_lightning,this.nicon_lock],this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(t){e.gold_pig.init_x=t.stageX},this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,function(t){1!=e.nagetive_status[Ns.Lock]&&e.gold_pig.move(t,e.p_role)},this),this._progress_bar_width=this.icon_progressbar.width},PlayScene.prototype.enoughPositive=function(tool_name){var label_tool;
"yaoshui"==tool_name?label_tool=eval("this.cleansing_num"):"dj_sh88_png"==tool_name?label_tool=eval("this.shield_num"):"dj_double_png"==tool_name?label_tool=eval("this.double_num"):"dj_time88_png"==tool_name&&(label_tool=eval("this.common_num"));var num_str=label_tool.text,c_num=parseInt(num_str.slice(1));return 0==c_num?!1:(console.log("c_num : "+c_num),label_tool.text="x"+(c_num-1),!0)},PlayScene.prototype.clickToolGroup=function(e){if(e.target.numElements)return void console.log("点到空白处...");var t=this.enoughPositive(e.target.name);if(t){if(this.closePositive(),this.userDatabaseTool(e.target.name),"yaoshui"==e.target.name)return console.log("使用了净化药水。。。"),void this.cleanAllNagetive();this.showPositiveBar(e.target.name),"dj_sh88_png"==e.target.name?(this.img_light_shield.visible=!0,this.onShield=!0):(this.img_light_shield.visible=!1,this.onShield=!1),"dj_time88_png"==e.target.name&&(console.log("匀速药水..."),this.down_speed=5,this.create_tool_speed=30,this.common_speed_flag=!0)}},PlayScene.prototype.userDatabaseTool=function(e){var t="";switch(e){case"revive":t=parseInt(localStorage.getItem("revive_num"))-1+"",localStorage.setItem("revive_num",t);break;case"yaoshui":t=parseInt(localStorage.getItem("clean_num"))-1+"",localStorage.setItem("clean_num",t);break;case"dj_double_png":t=parseInt(localStorage.getItem("double_num"))-1+"",localStorage.setItem("double_num",t);break;case"dj_sh88_png":t=parseInt(localStorage.getItem("shield_num"))-1+"",localStorage.setItem("shield_num",t);break;case"dj_time88_png":t=parseInt(localStorage.getItem("speed_num"))-1+"",localStorage.setItem("speed_num",t)}console.log("到数据库减数据。。。"+e);var n=localStorage.getItem("uid");HttpServerSo.requestPost("way=use_tool&uid="+n+"&tname="+e,function(e){})},PlayScene.prototype.removeEnemy=function(e){e.parent&&this.removeChild(e),this.enemy_list.splice(this.enemy_list.indexOf(e),1),e=null},PlayScene.prototype.getGoldencoin=function(){var e="",t=Math.random();return e=.5>t?"GoldenCoin(100)":.85>t?"GoldenCoin(1000)":.95>t?"GoldenCoin(10000)":"GoldenCoin(100000)"},PlayScene.prototype.randomGetTool=function(rate){var show_tool;this.commom_speed_rate=this.golden_coin_rate+6,this.double_coin_rate=this.commom_speed_rate+3,this.heart_rate=this.double_coin_rate+1,this.lightning_rate=this.heart_rate+4,this.skull_coin_rate=this.lightning_rate+5,this.lock_rate=this.skull_coin_rate+10,this.shield_rate=this.lock_rate+4,this.bomb_rate=this.shield_rate+12,this.cleansing=this.bomb_rate+1;var rdm_num=100*Math.random();rate>0&&(rdm_num=rate),show_tool=rdm_num<this.golden_coin_rate?this.getGoldencoin():rdm_num<this.commom_speed_rate?"CommonSpeed()":rdm_num<this.double_coin_rate?"DoubleCoin()":rdm_num<this.heart_rate?this.getGoldencoin():rdm_num<this.lightning_rate?"Lightning()":rdm_num<this.skull_coin_rate?"SkullCoin()":rdm_num<this.lock_rate?"Lock()":rdm_num<this.shield_rate?"Shield()":rdm_num<this.bomb_rate?"Bomb()":rdm_num<this.cleansing?"Cleansing()":this.getGoldencoin();var tool=eval("new "+show_tool);this.enemy_list.push(tool),this.addChild(tool)},PlayScene.prototype.showPositiveBar=function(e){this._positive_index=0,this.icon_progressbar.scaleX=1,this.group_tool.visible=!1,this.positive_group.visible=!0,this.positive_status=!0,this.positive_name=e,this.tool_icon.texture=RES.getRes(e),"dj_double_png"==this.positive_name&&(this.img_light_shield.visible=!1,this.onShield=!1,this.common_speed_flag=!1),"dj_time88_png"==this.positive_name&&(this.img_light_shield.visible=!1,this.onShield=!1),"dj_sh88_png"==this.positive_name&&(this.common_speed_flag=!1)},PlayScene.prototype.closePositive=function(){this.group_tool.visible=!0,this.positive_group.visible=!1,this.positive_status=!1,this._positive_index=0,this.icon_progressbar.scaleX=1,this.common_speed_flag=!1,this.img_light_shield.visible=!1,this.onShield=!1,this.positive_name="none"},PlayScene.prototype.cleanAllNagetive=function(){var e=this;this.nagetive_status.forEach(function(t,n){e.nagetive_status[n]=!1,e.nagetive_index[n]=0,e.nagetive_shapes[n].parent&&e.nagetive_group.removeChild(e.nagetive_shapes[n]),e.nagetive_icons[n].visible&&(e.nagetive_icons[n].visible=!1),e.per_name.visible||(e.per_name.visible=!0)})},PlayScene.prototype.toolEated=function(e,t){this.eatedFlag=this.pig.hitTestPoint(e.btm_tool.x+28.5,t.y+57),this.eatedFlag===!0&&(e.onStatus(this,t),e.skill(this,t),this.removeEnemy(t))},PlayScene.prototype.setSpeed=function(){this.down_speed-this.current_speed!=6&&(this.speed_index+=1,this.temp_level=Math.floor(this.speed_index/(30*this.level_seconds)),this.speed_level=this.temp_level,this.down_speed=3+this.speed_level,this.down_speed<10?this.create_tool_speed=30:this.down_speed<20?(15==this.down_speed&&(this.level_seconds=this.thirty_seconds_level_seconds),this.create_tool_speed=10):this.down_speed<30?this.create_tool_speed=4:this.down_speed<40?this.create_tool_speed=2:(this.down_speed=40,this.create_tool_speed=2))},PlayScene.prototype.onEnterFrame=function(e){var t=this;if(!this.isPause){if(this._findex+=1,this.common_speed_flag||this.setSpeed(),this.add_coin_arr.length>0&&this.add_coin_arr.forEach(function(e){if(e.alpha>0)e.alpha-=.1,e.y-=1;else{var n=t.add_coin_arr.indexOf(e);t.add_coin_arr.splice(n,1),t.p_role.addChild(e)}}),this.positive_status&&(this._positive_index++,"none"!=this.positive_name)){var n=void 0;n="dj_double_png"==this.positive_name?this._positive_time+60:this._positive_time,this.icon_progressbar.scaleX-=1/n,this._positive_index>=n&&this.closePositive()}this.onShield?this.img_light_shield&&(this.light_rotation_angle+=12,this.light_rotation_angle>=360&&(this.light_rotation_angle=0),this.img_light_shield.rotation=this.light_rotation_angle):this.nagetive_status.forEach(function(e,n){if(1==e){var o=void 0;if(o=2==n?t._nagetive_time-60:t._nagetive_time,t.nagetive_index[n]++,t.nagetive_shapes[n].graphics.clear(),t.nagetive_shapes[n].graphics.lineStyle(2,16711680),t.nagetive_shapes[n].graphics.drawArc((2*n+1)*t._nagetive_radius,t._nagetive_radius,t._nagetive_radius,-90*t._oneDegree,(270-360/o*t.nagetive_index[n])*t._oneDegree-t._oneDegree),t.nagetive_index[n]>=o){console.log("负面道具解除状态"),t.nagetive_status[n]=!1,t.nagetive_index[n]=0,t.nagetive_group.removeChild(t.nagetive_shapes[n]),t.nagetive_icons[n].visible=!1;var i=!1;t.nagetive_status.forEach(function(e){e&&(i=!0)}),0==i&&(t.per_name.visible=!0),n==Ns.Lightning&&(t.down_speed=t.current_speed)}}}),this._findex>this.create_tool_speed&&(this._findex=0,this.randomGetTool()),this.enemy_list.forEach(function(e){if(e.y+=t.down_speed,e.y>500)switch(e.y>560&&t.removeEnemy(e),e.name){case"goldencoin":var n=e;t.toolEated(n,e);break;case"bomb":var o=e;t.toolEated(o,e);break;case"commonspeed":var i=e;t.toolEated(i,e);break;case"doublecoin":var r=e;t.toolEated(r,e);break;case"heart":var a=e;t.toolEated(a,e);break;case"lightning":var s=e;t.toolEated(s,e);break;case"lock":var l=e;t.toolEated(l,e);break;case"shield":var c=e;t.toolEated(c,e);break;case"cleansing":var u=e;t.toolEated(u,e);break;case"skullcoin":var _=e;t.toolEated(_,e)}})}},PlayScene.getRandomX=function(){return Math.floor(Math.random()*SceneManager.instance._stage.stage.stageWidth)},PlayScene.getToolBitmap=function(e){var t=new egret.Bitmap;t.texture=RES.getRes(e);var n=PlayScene.getRandomX();return n>SceneManager.instance._stage.stage.stageWidth-57&&(n=SceneManager.instance._stage.stage.stageWidth-57),t.width=57,t.height=57,t.x=n,t.y=0,t},PlayScene}(eui.Component);__reflect(PlayScene.prototype,"PlayScene",["eui.UIComponent","egret.DisplayObject"]);var RankScene=function(_super){function RankScene(){var e=_super.call(this)||this;return e.list_arr0=[],e.list_arr1=[],e.list_arr2=[],e.list_arr3=[],e.list_arr4=[],e.list_arr5=[],e.list_arr6=[],e.list_arr7=[],e}return __extends(RankScene,_super),RankScene.prototype.partAdded=function(e,t){_super.prototype.partAdded.call(this,e,t)},RankScene.prototype.currectIndexShow=function(e){var t=this.getDateOrderIndex(e);void 0==t&&(t=this.today_key);for(var n=0;n<this.group_date.numChildren;n++){var o=this.group_date.getChildAt(n);o.getChildAt(2).visible=!1}var i=this.group_date.getChildAt(t-1);i.getChildAt(2).visible=!0},RankScene.prototype.clickDateButton=function(e){var t=e.target;if("label"==t.name){this.no_data_group.visible=!1;var n=t.text.substr(0,t.text.length-1),o=void 0;switch(this.currectIndexShow(n),n==this.today_date&&(n=""),n){case"28":o=this.list_arr1,this.records_list.dataProvider=new eui.ArrayCollection(this.list_arr1);break;case"29":o=this.list_arr2,this.records_list.dataProvider=new eui.ArrayCollection(this.list_arr2);break;case"30":o=this.list_arr3,this.records_list.dataProvider=new eui.ArrayCollection(this.list_arr3);break;case"31":o=this.list_arr4,this.records_list.dataProvider=new eui.ArrayCollection(this.list_arr4);break;case"1":o=this.list_arr5,this.records_list.dataProvider=new eui.ArrayCollection(this.list_arr5);break;case"2":o=this.list_arr6,this.records_list.dataProvider=new eui.ArrayCollection(this.list_arr6);break;case"3":o=this.list_arr7,this.records_list.dataProvider=new eui.ArrayCollection(this.list_arr7);break;default:o=this.list_arr0,this.records_list.dataProvider=new eui.ArrayCollection(this.list_arr0)}0==o.length&&(this.no_data_group.visible=!0)}},RankScene.prototype.childrenCreated=function(){var _this=this;_super.prototype.childrenCreated.call(this),this.group_score.verticalScrollBar.autoVisibility=!1,this.group_date.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickDateButton,this);var today=(new Date).getDate();this.today_date=today+"",this.today_key=this.getDateOrderIndex(today+"");var today_obj=eval("this.l_date_"+this.today_key);today_obj.text="今日",today_obj.parent.getChildAt(2).visible=!0;var uid=localStorage.getItem("uid");this.rbtn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManager.toMainScene(),SceneManager.instance.mainScene.toggleBtn(0)},this);var cu_month,cu_day,month=(new Date).getMonth()+1,day=(new Date).getDate();cu_month=10>month?"0"+month:""+month,cu_day=10>day?"0"+day:""+day,this.cu_date.text=cu_month+"-"+cu_day;var params="way=rank&uid="+uid;HttpServerSo.requestPost(params,this.postComplete,this),this.rinf_group.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManager.instance.mainScene.toggleBtn(0),SceneManager.toRecordScene()},this),HttpServerSo.requestPost("way=get_records&uid="+uid,function(data,that){var res=JSON.parse(data);if(console.log("myIdex : "+res.my_index),void 0===res.my_index?that.my_index.text="99+":that.my_index.text=res.my_index,res.today_max_score.length>0){var post_score=parseInt(res.today_max_score),max_score="";max_score=post_score>9999?post_score/1e4+"亿":post_score+"万",_this.rank_score.text=max_score}if(null!=res.perday[0]){var list_arr=[];res.perday.forEach(function(sub_data,sub_k){sub_data.forEach(function(item,k){var uname=item.username;item.realName.length>0&&(uname=item.realName);var now_arr=eval("that.list_arr"+(sub_k+1));now_arr.push({id:k,order_num:item.order_num,img_order:item.img_name,uname:uname,udate:item.overtime,uscore:item.max_score/1e4+"亿",award_word:item.award_word})})}),res.today_scores.forEach(function(e,t){var n=e.username;e.realName.length>0&&(n=e.realName),that.list_arr0.push({id:t,order_num:e.order_num,img_order:e.img_name,uname:n,udate:e.overtime,uscore:e.max_score/1e4+"亿",award_word:e.award_word})}),_this.records_list.dataProvider=new eui.ArrayCollection(that.list_arr0),_this.records_list.itemRenderer=RecordsItem,_this.no_data_group.visible=!1,_this.group_date.visible=!0,_this.title_group.visible=!0}},this)},RankScene.prototype.postComplete=function(e,t){"no_data"==e||t.init_data(e)},RankScene.prototype.init_data=function(e){var t=this,n=JSON.parse(e),o=n.username;n.realName.length>0&&(o=n.realName),this.real_name.text=o;var i=localStorage.getItem("avatar");i=n.avatar.indexOf("http")?"http://www.le626.com/"+n.avatar:n.avatar;var r=new egret.ImageLoader;r.addEventListener(egret.Event.COMPLETE,function(e){var n=(e.currentTarget,new egret.Texture);n._setBitmapData(r.data),t.rimg_avatar.source=n;var o=new egret.Shape;o.graphics.beginFill(0),o.graphics.drawCircle(92,30,20),o.graphics.endFill(),t.rinf_group.addChild(o),t.rimg_avatar.mask=o},event),r.load(i)},RankScene.prototype.getDateOrderIndex=function(e){var t;switch(e){case"3":t=1;case"4":t=1;break;case"5":t=2;break;case"6":t=3;break;case"7":t=4;break;case"8":t=5;break;case"9":t=6;break;case"10":t=7}return t},RankScene}(eui.Component);__reflect(RankScene.prototype,"RankScene",["eui.UIComponent","egret.DisplayObject"]);var RecordScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,n){e.prototype.partAdded.call(this,t,n)},t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.rcd_scroll.verticalScrollBar.autoVisibility=!1,this.sbtn_back.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManager.toRankScene(),SceneManager.instance.mainScene.toggleBtn(0)},this);var n=localStorage.getItem("avatar"),o="",i=localStorage.getItem("realName");o=i.length>0?i:localStorage.getItem("username"),this.rcd_uname.text=o;var r=new egret.ImageLoader;r.addEventListener(egret.Event.COMPLETE,function(e){var n=(e.currentTarget,new egret.Texture);n._setBitmapData(r.data),t.rcd_ava.source=n;var o=new egret.Shape;o.graphics.beginFill(0),o.graphics.drawCircle(47.5,49.5,27.5),o.graphics.endFill(),t.rcd_group.addChild(o),t.rcd_ava.mask=o},this),r.load(n);var a=localStorage.getItem("uid");HttpServerSo.requestPost("way=getSelfRecords&uid="+a,function(e,n){var o=JSON.parse(e),i=[];n.rcd_scores.text=o.max_score/1e4+"亿",o.data.forEach(function(e,t){i.push({score:"+"+e.max_score/1e4,the_date:e.overtime})}),t.rcd_list.dataProvider=new eui.ArrayCollection(i)},this)},t}(eui.Component);__reflect(RecordScene.prototype,"RecordScene",["eui.UIComponent","egret.DisplayObject"]);var RecordsItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/skins/item-skins/records_item.exml",t.award_word.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){location.href="http://www.le626.com/index.st/User/vcoin"},t),t}return __extends(t,e),t.prototype.dataChanged=function(){this.data.img_order.lenght>0&&(this.order_font.visible=!1),parseInt(this.data.id)%2==0&&(this.item_bg.fillColor=15857918)},t}(eui.ItemRenderer);__reflect(RecordsItem.prototype,"RecordsItem");var RuleScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,n){e.prototype.partAdded.call(this,t,n)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.scr_now.verticalScrollBar.autoVisibility=!1,this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManager.instance.mainScene.toggleBtn(0),SceneManager.toMainScene()},this)},t}(eui.Component);__reflect(RuleScene.prototype,"RuleScene",["eui.UIComponent","egret.DisplayObject"]);var StoreScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,n){e.prototype.partAdded.call(this,t,n)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.scr_shop.horizontalScrollBar.autoVisibility=!1;var t=[{image1:"resource/act/pig_goods/word_double.png",image2:"resource/act/pig_goods/Coin_double.png",label:"￥5",label1:"sbjb"},{image1:"resource/act/pig_goods/word_life.png",image2:"resource/act/pig_goods/buy_Heart_life.png",label:"￥20",label1:"fhzx"},{image1:"resource/act/pig_goods/word_ss.png",image2:"resource/act/pig_goods/buy_ss.png",label:"￥3",label1:"jhys"},{image1:"resource/act/pig_goods/word_sj.png",image2:"resource/act/pig_goods/dj_sj.png",label:"￥5",label1:"zcls"},{image1:"resource/act/pig_goods/word_dp.png",image2:"resource/act/pig_goods/buy_dp.png",label:"￥10",label1:"shzd"}];this.store_list.dataProvider=new eui.ArrayCollection(t),this.scr_shop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickBuyButton,this),this.sbtn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){SceneManager.instance.mainScene.toggleBtn(0),SceneManager.toMainScene()},this),this.btn_sure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sureBuy,this),this.btn_cancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBuy,this)},t.prototype.closeBuy=function(){this.group_non.visible=!1},t.prototype.sureBuy=function(){var e=localStorage.getItem("uid"),t="way=buy&uid="+e+"&tname="+this.tname+"&expend="+this.money;HttpServerSo.requestPost(t,this.postComplete,{that:this,tname:this.tname})},t.prototype.clickBuyButton=function(e){if(e.target instanceof eui.Button){var t=void 0;switch(localStorage.setItem("buy_tname",e.target.name),e.target.name){case"sbjb":t="双倍金币",this.tname="tool_dbcoin",this.money=10;break;case"fhzx":t="复活之心",this.tname="tool_revive",this.money=10;break;case"jhys":t="净化圣水",this.tname="tool_drug",this.money=10;break;case"zcls":t="正常流速",this.tname="tool_regular_speed",this.money=10;break;case"shzd":t="守护之盾",this.tname="tool_shield",this.money=10}this.group_non.visible=!0,this.btn_cancel.visible=!0,this.btn_sure.visible=!0,this.btn_charge.visible=!1,this.no_enough_line.text="亲，您正在购买“"+t+"”",this.buy_label.text="帐户余额扣除"+this.money+"元"}},t.prototype.postComplete=function(e,t){console.log("store_buy...."+e);var n="";if("ok"==e){switch(localStorage.setItem("main_status","true"),localStorage.setItem("type","buy_tool"),t.tname){case"sbjb":n=parseInt(localStorage.getItem("double_num"))+1+"",localStorage.setItem("double_num",n),localStorage.setItem("buy_tname","sbjb");break;case"fhzx":n=parseInt(localStorage.getItem("revive_num"))+1+"",localStorage.setItem("revive_num",n),localStorage.setItem("buy_tname","fhzx");break;case"jhys":n=parseInt(localStorage.getItem("clean_num"))+1+"",localStorage.setItem("clean_num",n),localStorage.setItem("buy_tname","jhys");break;case"zcls":n=parseInt(localStorage.getItem("speed_num"))+1+"",localStorage.setItem("speed_num",n),localStorage.setItem("buy_tname","zcls");break;case"shzd":n=parseInt(localStorage.getItem("shield_num"))+1+"",localStorage.setItem("shield_num",n),localStorage.setItem("buy_tname","shzd")}SceneManager.instance.mainScene.toggleBtn(0),SceneManager.toMainScene()}else"nonenough"==e?(t.that.no_enough_line.text="亲，您的余额不足，无法购买",t.that.buy_label.text="道具哦，快去充值吧~",t.that.btn_cancel.visible=!1,t.that.btn_sure.visible=!1,t.that.btn_charge.visible=!0,t.that.btn_charge.addEventListener(egret.TouchEvent.TOUCH_TAP,t.that.notEnoughFund,t.that)):console.log("res :"+e)},t.prototype.notEnoughFund=function(){location.href=localStorage.getItem("recharge_url")},t}(eui.Component);__reflect(StoreScene.prototype,"StoreScene",["eui.UIComponent","egret.DisplayObject"]);