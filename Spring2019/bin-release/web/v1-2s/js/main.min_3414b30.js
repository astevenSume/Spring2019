var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o["throw"](e))}catch(t){r(t)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,r&&(a=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,r=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(o){n=[6,o],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,r,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Enemy=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(egret.Sprite);__reflect(Enemy.prototype,"Enemy");var Heart=function(e){function t(){var t=e.call(this)||this;return t.name="heart",t.val=0,t.creatShape(),t}return __extends(t,e),t.prototype.creatShape=function(){this.btm_tool=PlayScene.getToolBitmap("dj_life114_png"),this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){},t.prototype.skill=function(e,t){console.log("吃到 复活"),e.p_heart_num.text="x"+(parseInt(e.p_heart_num.text.slice(1))+1)},t}(Enemy);__reflect(Heart.prototype,"Heart");var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=t.sent(),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,this.loadTheme()];case 2:return n.sent(),[4,RES.loadGroup("playing")];case 3:return n.sent(),[4,RES.loadGroup("preload",0,e)];case 4:return n.sent(),this.stage.removeChild(e),[3,6];case 5:return t=n.sent(),console.error(t),[3,6];case 6:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,n){var o=new eui.Theme("resource/default.thm.json",e.stage);o.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){SceneManager.instance.setStage(this),SceneManager.toMainScene()},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t},t.prototype.startAnimation=function(e){var t=this,n=new egret.HtmlTextParser,o=e.map(function(e){return n.parse(e)}),i=this.textfield,r=-1,a=function(){r++,console.log("start animation : "+r),r>=o.length&&(r=0);var e=o[r];i.textFlow=e;var n=egret.Tween.get(i);n.to({alpha:1},200),n.wait(2e3),n.to({alpha:0},200),n.call(a,t)};a()},t.prototype.onButtonClick=function(e){var t=new eui.Panel;t.title="Title",t.horizontalCenter=0,t.verticalCenter=0,this.addChild(t)},t}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,o){function i(e){t.call(o,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),n.call(o))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(o,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,n){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(o,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var s=e.split("/");s.pop();var c=s.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(o,generateJSON.paths[e])},this):RES.getResByUrl(c,function(n){window.JSONParseClass.setData(n),egret.callLater(function(){t.call(o,generateJSON.paths[e])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(o,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var SceneManager=function(e){function t(){var t=e.call(this)||this;return t.mainScene=new MainScene,t.playScene=new PlayScene,t.ruleScene=new RuleScene,t.storeScene=new StoreScene,t.rankScene=new RankScene,t.recordScene=new RecordScene,t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return this.sceneManager||(this.sceneManager=new t),this.sceneManager},enumerable:!0,configurable:!0}),t.prototype.setStage=function(e){this._stage=e},t.toMainScene=function(){var e=this.instance.mainScene;e.parent||this.instance._stage.addChild(e),t.instance.removeOther(e)},t.toPlayScene=function(){this.instance.playScene=new PlayScene;var e=this.instance.playScene;this.instance._stage.addChild(e),this.instance.mainScene.addChild(e)},t.toRuleScene=function(){this.instance.ruleScene=new RuleScene;var e=this.instance.ruleScene;this.instance.removeOther(e),this.instance.mainScene.addChild(e)},t.toStoreScene=function(){this.instance.storeScene=new StoreScene;var e=this.instance.storeScene;this.instance.removeOther(e),this.instance.mainScene.addChild(e)},t.toRankScene=function(){this.instance.rankScene=new RankScene;var e=this.instance.rankScene;this.instance.removeOther(e),this.instance.mainScene.addChild(e)},t.toRecordScene=function(){this.instance.recordScene=new RecordScene;var e=this.instance.recordScene;this.instance.removeOther(e),this.instance.mainScene.addChild(e)},t.prototype.removeOther=function(e){var t=this,n=[this.playScene,this.ruleScene,this.storeScene,this.rankScene,this.recordScene];n.forEach(function(n,o){e!==n&&n.parent&&t.mainScene.removeChild(n)})},t}(eui.UILayer);__reflect(SceneManager.prototype,"SceneManager");var Bomb=function(e){function t(){var t=e.call(this)||this;return t.name="bomb",t.val=0,t.creatShape(),t}return __extends(t,e),t.prototype.creatShape=function(){this.btm_tool=PlayScene.getToolBitmap("dj_zd114_png"),this.addChild(this.btm_tool)},t.prototype.isAgain=function(e){e.over_group.visible=!0,e.res_unit.text=e.p_score.text.slice(e.p_score.text.length-1);var t=e.p_score.text.slice(0,e.p_score.text.length-1);e.res_score.text=t,e.p_score.text="0万",e.setChildIndex(e.over_group,e.numChildren),e.btn_again.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){console.log("再来一次.."),e.over_group.visible=!1,e.isPause=!1,e.speed_index=0,e.speed_level=0,e.game_init(!1)},this),e.icon_endclose.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManager.instance.mainScene.toggleBtn(0),SceneManager.toMainScene(),e.over_group.visible=!1},this)},t.prototype.onStatus=function(e,t){return __awaiter(this,void 0,void 0,function(){var t,n,o=this;return __generator(this,function(i){return e.onShield?[2]:(e.cleanAllNagetive(),e.isPause=!0,t=e.p_heart_num.text,n=parseInt(t.slice(1)),0==n?this.isAgain(e):(e.relife_group.visible=!0,e.setChildIndex(e.relife_group,e.numChildren),e.pbtn_relife.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){console.log("复活了.."),e.p_heart_num.text="x"+(n-1),e.isPause=!1,e.relife_group.visible=!1,e.nagetive_status[Ns.Lock]=!1},this),e.pbtn_over_now.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){o.isAgain(e)},this)),[2])})})},t.prototype.skill=function(e,t){console.log("吃到 炸弹"),e.onShield||(e.nagetive_status[Ns.Lock]=!0)},t}(Enemy);__reflect(Bomb.prototype,"Bomb");var Cleansing=function(e){function t(t){var n=e.call(this)||this;return n.val=t,n.base_money_num=1e4,n.name="cleansing",n.creatShape(t),n}return __extends(t,e),t.prototype.creatShape=function(e){this.btm_tool=PlayScene.getToolBitmap("dj_ss114_png"),this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){e.cleanAllNagetive()},t.prototype.skill=function(e,t){console.log("吃到 净化")},t}(Enemy);__reflect(Cleansing.prototype,"Cleansing");var CommonSpeed=function(e){function t(){var t=e.call(this)||this;return t.name="commonspeed",t.val=0,t.creatShape(),t}return __extends(t,e),t.prototype.creatShape=function(){this.btm_tool=new egret.Bitmap,this.btm_tool=PlayScene.getToolBitmap("dj_time114_png"),this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){e.showPositiveBar("dj_time88_png")},t.prototype.skill=function(e,t){console.log("吃到 匀速"),e.down_speed=3,e.create_tool_speed=20,e.common_speed_flag=!0},t}(Enemy);__reflect(CommonSpeed.prototype,"CommonSpeed");var DoubleCoin=function(e){function t(){var t=e.call(this)||this;return t.name="doublecoin",t.val=0,t.creatShape(),t}return __extends(t,e),t.prototype.creatShape=function(){this.btm_tool=PlayScene.getToolBitmap("dj_gold_double_png"),this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){e.showPositiveBar("dj_double_png")},t.prototype.skill=function(e,t){console.log("吃到 双倍")},t}(Enemy);__reflect(DoubleCoin.prototype,"DoubleCoin");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function o(o){t.call(n,o,e)}if(RES.hasRes(e)){var i=RES.getRes(e);i?o(i):RES.getResAsync(e,o,this)}else RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var GoldenCoin=function(e){function t(t){var n=e.call(this)||this;return n.val=t,n.base_money_num=1e4,n.name="goldencoin",n.creatShape(t),n}return __extends(t,e),t.prototype.creatShape=function(e){switch(e){case 10:this.btm_tool=PlayScene.getToolBitmap("dj_glod_10_png");break;case 100:this.btm_tool=PlayScene.getToolBitmap("gold_bai_png");break;case 1e3:this.btm_tool=PlayScene.getToolBitmap("gold_qian_png");break;case 1e4:this.btm_tool=PlayScene.getToolBitmap("gold_yy_png");break;case 1e5:this.btm_tool=PlayScene.getToolBitmap("gold_sy_png")}this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){},t.prototype.skill=function(e,t){console.log("吃到 金币");var n=t.val;1==e.positive_status&&"dj_double_png"==e.positive_name&&(n=2*t.val),1==e.nagetive_status[Ns.SkullCoin]&&(n=0),e.score+=n,e.score>9999?e.p_score.text=e.score/1e4+"亿":e.p_score.text=e.score+"万"},t}(Enemy);__reflect(GoldenCoin.prototype,"GoldenCoin");var GoldPig=function(e){function t(t){var n=e.call(this)||this;return n.pig=t,n}return __extends(t,e),Object.defineProperty(t.prototype,"init_x",{get:function(){return this._init_x},set:function(e){this._init_x=e},enumerable:!0,configurable:!0}),t.prototype.move=function(e,t){var n=e.stageX,o=n-this.init_x;t.x+o<-15?t.x=-15:t.x+o>=SceneManager.instance._stage.stage.stageWidth-t.width+15?t.x=SceneManager.instance._stage.stage.stageWidth-t.width+15:t.x+=o,this.init_x=n},t.prototype.skill=function(){},t}(egret.Sprite);__reflect(GoldPig.prototype,"GoldPig");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=100,this.textField.width=480,this.textField.height=100},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Lightning=function(e){function t(){var t=e.call(this)||this;return t.name="lightning",t.val=0,t.creatShape(),t}return __extends(t,e),t.prototype.creatShape=function(){this.btm_tool=PlayScene.getToolBitmap("dj_lightening114_png"),this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){e.onShield||(e.nagetive_status[Ns.Lightning]=!0,e.nagetive_index[Ns.Lightning]=0,e.nagetive_group.addChild(e.nagetive_shapes[Ns.Lightning]),e.nicon_lightning.visible||(e.nicon_lightning.visible=!0),e.per_name.visible&&(e.per_name.visible=!1),e.current_speed=e.down_speed)},t.prototype.skill=function(e,t){console.log("吃到 闪电"),e.down_speed=e.current_speed+6},t}(Enemy);__reflect(Lightning.prototype,"Lightning");var Lock=function(e){function t(){var t=e.call(this)||this;return t.name="lock",t.val=0,t.creatShape(),t}return __extends(t,e),t.prototype.creatShape=function(){this.btm_tool=PlayScene.getToolBitmap("dj_lock114_png"),this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){e.onShield||(e.nagetive_status[Ns.Lock]=!0,e.nagetive_index[Ns.Lock]=0,e.nagetive_group.addChild(e.nagetive_shapes[Ns.Lock]),e.nicon_lock.visible||(e.nicon_lock.visible=!0),e.per_name.visible&&(e.per_name.visible=!1))},t.prototype.skill=function(e,t){console.log("吃到 锁")},t}(Enemy);__reflect(Lock.prototype,"Lock");var Shield=function(e){function t(){var t=e.call(this)||this;return t.name="shield",t.val=0,t.creatShape(),t}return __extends(t,e),t.prototype.creatShape=function(){this.btm_tool=PlayScene.getToolBitmap("dj_sh114_png"),this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){e.showPositiveBar("dj_sh88_png")},t.prototype.skill=function(e,t){console.log("吃到 护盾"),e.onShield=!0},t}(Enemy);__reflect(Shield.prototype,"Shield");var SkullCoin=function(e){function t(){var t=e.call(this)||this;return t.name="skullcoin",t.val=0,t.creatShape(),t}return __extends(t,e),t.prototype.creatShape=function(){this.btm_tool=PlayScene.getToolBitmap("gold_cod_png"),this.addChild(this.btm_tool)},t.prototype.onStatus=function(e,t){e.onShield||(e.nagetive_status[Ns.SkullCoin]=!0,e.nagetive_index[Ns.SkullCoin]=0,e.nagetive_group.addChild(e.nagetive_shapes[Ns.SkullCoin]),e.nicon_skullcoin.visible||(e.nicon_skullcoin.visible=!0),e.per_name.visible&&(e.per_name.visible=!1))},t.prototype.skill=function(e,t){console.log("吃到 骷髅")},t}(Enemy);__reflect(SkullCoin.prototype,"SkullCoin");var HttpServerSo=function(){function e(){}return e.requestPost=function(e,t){var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.open("http://localhost:9090/index.st/Demo/getRecord",egret.HttpMethod.POST),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(e),n.addEventListener(egret.Event.COMPLETE,function(e){var n=e.currentTarget;t(n.response)},this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){},this),n.addEventListener(egret.ProgressEvent.PROGRESS,function(e){},this)},e.requestGet=function(){console.log("get")},e}();__reflect(HttpServerSo.prototype,"HttpServerSo");var LoadingMe=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,n){e.prototype.partAdded.call(this,t,n)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onProgress=function(e,t){},t}(eui.Component);__reflect(LoadingMe.prototype,"LoadingMe",["eui.UIComponent","egret.DisplayObject"]);var MainScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,n){e.prototype.partAdded.call(this,t,n)},t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.group_mbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){if(e.target.numElements)return void console.log("未点到按钮！");var n=e.target;n.selected?t.toggleBtn(n):n.selected=!0},this),this.mbtn_start.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManager.toPlayScene()},this)},t.prototype.toggleBtn=function(e){if(this.group_mbtn.$children.forEach(function(t){e!==t&&(e=e,t.selected=!1)}),0===e)return void console.log("back");var t=this.group_mbtn.getChildIndex(e);switch(t){case 0:SceneManager.toRuleScene(),this.setChildIndex(this.group_mbtn,this.numChildren);break;case 1:SceneManager.toStoreScene(),this.setChildIndex(this.group_mbtn,this.numChildren);break;case 2:SceneManager.toRankScene(),this.setChildIndex(this.group_mbtn,this.numChildren)}},t}(eui.Component);__reflect(MainScene.prototype,"MainScene",["eui.UIComponent","egret.DisplayObject"]);var Ns;!function(e){e[e.SkullCoin=0]="SkullCoin",e[e.Lightning=1]="Lightning",e[e.Lock=2]="Lock"}(Ns||(Ns={}));var NonSustain;!function(e){e[e.bomb=0]="bomb",e[e.goldencoin=1]="goldencoin"}(NonSustain||(NonSustain={}));var PlayScene=function(_super){function PlayScene(){var e=_super.call(this)||this;return e._score=0,e.enemy_list=[],e._PI=Math.PI,e._oneDegree=Math.PI/180,e.common_speed_flag=!1,e.golden_coin_rate=0,e.eatedFlag=!1,e.level_seconds=2,e.temp_level=0,e.game_init(!0),e}return __extends(PlayScene,_super),PlayScene.prototype.game_init=function(e){var t=this;this._findex=0,console.log(this.enemy_list),this.enemy_list.length>0&&this.enemy_list.forEach(function(e){t.removeEnemy(e)}),this.score=0,this.create_tool_speed=30,this.down_speed=3,this.positive_status=!1,this._positive_time=90,this._positive_index=0,this.positive_name="none",this._nagetive_time=90,this.nagetive_status=[!1,!1,!1],this.nagetive_index=[0,0,0],this.nagetive_shapes=[new egret.Shape,new egret.Shape,new egret.Shape],this._nagetive_radius=15,this.onShield=!1,e&&(this.isPause=!1,this.speed_index=0,this.speed_level=0),e||this.relife_group.visible&&(this.relife_group.visible=!1)},Object.defineProperty(PlayScene.prototype,"score",{get:function(){return this._score},set:function(e){this._score=e},enumerable:!0,configurable:!0}),PlayScene.prototype.childrenCreated=function(){_super.prototype.childrenCreated.call(this),this.init_me(),this.pbtn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManager.toMainScene()},this),this.group_tool.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickToolGroup,this),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.randomGetTool()},PlayScene.prototype.partAdded=function(e,t){_super.prototype.partAdded.call(this,e,t)},PlayScene.prototype.init_me=function(){var e=this;this.gold_pig=new GoldPig(this.pig),this.per_name.text=localStorage.getItem("uname"),this.nagetive_icons=[this.nicon_skullcoin,this.nicon_lightning,this.nicon_lock],this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(t){e.gold_pig.init_x=t.stageX},this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,function(t){1!=e.nagetive_status[Ns.Lock]&&e.gold_pig.move(t,e.p_role)},this),this._progress_bar_width=this.icon_progressbar.width},PlayScene.prototype.enoughPositive=function(tool_name){var label_tool;"yaoshui"==tool_name?label_tool=eval("this.cleansing_num"):"dj_sh88_png"==tool_name?label_tool=eval("this.shield_num"):"dj_double_png"==tool_name?label_tool=eval("this.double_num"):"dj_time88_png"==tool_name&&(label_tool=eval("this.common_num"));var num_str=label_tool.text,c_num=parseInt(num_str.slice(1));return 0==c_num?!1:(console.log("c_num : "+c_num),label_tool.text="x"+(c_num-1),!0)},PlayScene.prototype.clickToolGroup=function(e){if(e.target.numElements)return void console.log("点到空白处...");var t=this.enoughPositive(e.target.name);if(t){if("yaoshui"==e.target.name)return void this.cleanAllNagetive();this.showPositiveBar(e.target.name),"dj_sh88_png"==e.target.name?this.onShield=!0:this.onShield=!1,"dj_time88_png"==e.target.name&&(console.log("匀速药水..."),this.down_speed=3,this.create_tool_speed=30,this.common_speed_flag=!0)}},PlayScene.prototype.removeEnemy=function(e){e.parent&&this.removeChild(e),this.enemy_list.splice(this.enemy_list.indexOf(e),1),e=null},PlayScene.prototype.getGoldencoin=function(){var e="",t=Math.random();return.6>t?e="GoldenCoin(10)":.8>t?e="GoldenCoin(100)":.88>t?e="GoldenCoin(1000)":1>t&&(e="GoldenCoin(10000)"),e},PlayScene.prototype.randomGetTool=function(rate){var show_tool,commom_speed_rate=this.golden_coin_rate+6,double_coin_rate=commom_speed_rate+3,heart_rate=double_coin_rate+1,lightning_rate=heart_rate+4,skull_coin_rate=lightning_rate+5,lock_rate=skull_coin_rate+10,shield_rate=lock_rate+4,bomb_rate=shield_rate+6,cleansing=bomb_rate+1,rdm_num=100*Math.random();rate>0&&(rdm_num=rate),show_tool=rdm_num<this.golden_coin_rate?this.getGoldencoin():commom_speed_rate>rdm_num?"CommonSpeed()":double_coin_rate>rdm_num?"DoubleCoin()":heart_rate>rdm_num?this.getGoldencoin():lightning_rate>rdm_num?"Lightning()":skull_coin_rate>rdm_num?"SkullCoin()":lock_rate>rdm_num?"Lock()":shield_rate>rdm_num?"Shield()":bomb_rate>rdm_num?"Bomb()":cleansing>rdm_num?"Cleansing()":this.getGoldencoin();var tool=eval("new "+show_tool);this.enemy_list.push(tool),this.addChild(tool)},PlayScene.prototype.showPositiveBar=function(e){this.group_tool.visible=!1,this.positive_group.visible=!0,this.positive_status=!0,this.positive_name=e,this.tool_icon.texture=RES.getRes(e),("dj_double_png"==this.positive_name||"dj_time88_png"==this.positive_name)&&(this.onShield=!1,this.common_speed_flag=!1)},PlayScene.prototype.closePositive=function(){this.group_tool.visible=!0,this.positive_group.visible=!1,this.positive_status=!1,this._positive_index=0,"dj_time88_png"==this.positive_name&&(this.common_speed_flag=!1),"dj_sh88_png"==this.positive_name&&(this.onShield=!1),this.positive_name="none",this.icon_progressbar.scaleX=1},PlayScene.prototype.cleanAllNagetive=function(){var e=this;console.log("使用了净化药水。。。"),this.nagetive_status.forEach(function(t,n){e.nagetive_status[n]=!1,e.nagetive_index[n]=0,e.nagetive_shapes[n].parent&&e.nagetive_group.removeChild(e.nagetive_shapes[n]),e.nagetive_icons[n].visible&&(e.nagetive_icons[n].visible=!1),e.per_name.visible||(e.per_name.visible=!0)})},PlayScene.prototype.toolEated=function(e,t){this.eatedFlag=this.pig.hitTestPoint(e.btm_tool.x+28.5,t.y+57),this.eatedFlag===!0&&(e.onStatus(this,t),e.skill(this,t),this.removeEnemy(t))},PlayScene.prototype.setSpeed=function(){this.speed_index+=1,this.temp_level=Math.floor(this.speed_index/(30*this.level_seconds)),this.speed_level=this.temp_level,this.down_speed=3+this.speed_level,this.down_speed<10?this.create_tool_speed=30:this.down_speed<20?this.create_tool_speed=10:this.down_speed<30?this.create_tool_speed=4:this.down_speed<40?this.create_tool_speed=2:(this.down_speed=40,this.create_tool_speed=2)},PlayScene.prototype.onEnterFrame=function(e){var t=this;this.isPause||(this._findex+=1,this.common_speed_flag||this.setSpeed(),this.positive_status&&(this._positive_index++,"none"!=this.positive_name&&(this.icon_progressbar.scaleX-=1/this._positive_time,this._positive_index>=this._positive_time&&this.closePositive())),this.onShield||this.nagetive_status.forEach(function(e,n){if(1==e&&(t.nagetive_index[n]++,t.nagetive_shapes[n].graphics.clear(),t.nagetive_shapes[n].graphics.lineStyle(2,16711680),t.nagetive_shapes[n].graphics.drawArc((2*n+1)*t._nagetive_radius,t._nagetive_radius,t._nagetive_radius,-90*t._oneDegree,(270-360/t._nagetive_time*t.nagetive_index[n])*t._oneDegree-t._oneDegree),t.nagetive_index[n]>=t._nagetive_time)){t.nagetive_status[n]=!1,t.nagetive_index[n]=0,t.nagetive_group.removeChild(t.nagetive_shapes[n]),t.nagetive_icons[n].visible=!1;var o=!1;t.nagetive_status.forEach(function(e){e&&(o=!0)}),0==o&&(t.per_name.visible=!0),n==Ns.Lightning&&(t.down_speed=t.current_speed)}}),this._findex>this.create_tool_speed&&(this._findex=0,this.randomGetTool()),this.enemy_list.forEach(function(e){if(e.y+=t.down_speed,e.y>500)switch(e.y>560&&t.removeEnemy(e),e.name){case"goldencoin":var n=e;t.toolEated(n,e);break;case"bomb":var o=e;t.toolEated(o,e);break;case"commonspeed":var i=e;t.toolEated(i,e);break;case"doublecoin":var r=e;t.toolEated(r,e);break;case"heart":var a=e;t.toolEated(a,e);break;case"lightning":var s=e;t.toolEated(s,e);break;case"lock":var c=e;t.toolEated(c,e);break;case"shield":var l=e;t.toolEated(l,e);break;case"cleansing":var p=e;t.toolEated(p,e);break;case"skullcoin":var h=e;t.toolEated(h,e)}}))},PlayScene.getRandomX=function(){return Math.floor(Math.random()*SceneManager.instance._stage.stage.stageWidth)},PlayScene.getToolBitmap=function(e){var t=new egret.Bitmap;t.texture=RES.getRes(e);var n=PlayScene.getRandomX();return n>SceneManager.instance._stage.stage.stageWidth-57&&(n=SceneManager.instance._stage.stage.stageWidth-57),t.width=57,t.height=57,t.x=n,t.y=0,t},PlayScene}(eui.Component);__reflect(PlayScene.prototype,"PlayScene",["eui.UIComponent","egret.DisplayObject"]);var RankScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,n){e.prototype.partAdded.call(this,t,n)},t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this);localStorage.getItem("uid");this.rbtn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManager.toMainScene(),SceneManager.instance.mainScene.toggleBtn(0)},this);var n="p1=postP1&p2=postP2";HttpServerSo.requestPost(n,this.postComplete);var o="http://thirdwx.qlogo.cn/mmopen/vi_32/jXMuUZyWicI88gYicC9E32bagIQT0fPzVzXWFn8biaMWmSQWIh19FSXHRXpwVYxFhuhvYvxazLITGNyjYbSA7SBMA/132",i=new egret.ImageLoader;i.addEventListener(egret.Event.COMPLETE,function(e){var n=(e.currentTarget,new egret.Texture);n._setBitmapData(i.data),t.rimg_avatar.source=n;var o=new egret.Shape;o.graphics.beginFill(0),o.graphics.drawCircle(92,30,20),o.graphics.endFill(),t.rinf_group.addChild(o),t.rimg_avatar.mask=o},event),i.load(o),this.rinf_group.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManager.instance.mainScene.toggleBtn(0),SceneManager.toRecordScene()},this)},t.prototype.postComplete=function(e){console.log(e)},t}(eui.Component);__reflect(RankScene.prototype,"RankScene",["eui.UIComponent","egret.DisplayObject"]);var RecordScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,n){e.prototype.partAdded.call(this,t,n)},t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.sbtn_back.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManager.instance.mainScene.toggleBtn(0),SceneManager.toMainScene()},this);var n="http://thirdwx.qlogo.cn/mmopen/vi_32/jXMuUZyWicI88gYicC9E32bagIQT0fPzVzXWFn8biaMWmSQWIh19FSXHRXpwVYxFhuhvYvxazLITGNyjYbSA7SBMA/132",o=new egret.ImageLoader;o.addEventListener(egret.Event.COMPLETE,function(e){var n=(e.currentTarget,new egret.Texture);n._setBitmapData(o.data),t.rcd_ava.source=n;var i=new egret.Shape;i.graphics.beginFill(0),i.graphics.drawCircle(47.5,49.5,27.5),i.graphics.endFill(),t.rcd_group.addChild(i),t.rcd_ava.mask=i},this),o.load(n)},t}(eui.Component);__reflect(RecordScene.prototype,"RecordScene",["eui.UIComponent","egret.DisplayObject"]);var RuleScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,n){e.prototype.partAdded.call(this,t,n)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(eui.Component);__reflect(RuleScene.prototype,"RuleScene",["eui.UIComponent","egret.DisplayObject"]);var StoreScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,n){e.prototype.partAdded.call(this,t,n)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);var t=[{image1:"resource/act/pig_goods/word_double.png",image2:"resource/act/pig_goods/Coin_double.png",label:"￥5",label1:"sbjb"},{image1:"resource/act/pig_goods/word_life.png",image2:"resource/act/pig_goods/buy_Heart_life.png",label:"￥20",label1:"fhzx"},{image1:"resource/act/pig_goods/word_ss.png",image2:"resource/act/pig_goods/buy_ss.png",label:"￥3",label1:"jhys"},{image1:"resource/act/pig_goods/word_sj.png",image2:"resource/act/pig_goods/dj_sj.png",label:"￥5",label1:"zcls"},{image1:"resource/act/pig_goods/word_dp.png",image2:"resource/act/pig_goods/buy_dp.png",label:"￥10",label1:"shzd"}];this.store_list.dataProvider=new eui.ArrayCollection(t),this.scr_shop.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){if(e.target instanceof eui.Button)switch(console.log(e.target.name),e.target.name){case"sbjb":break;case"fhzx":break;case"jhys":break;case"zcls":break;case"shzd":}},this),this.sbtn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManager.toMainScene()},this)},t}(eui.Component);__reflect(StoreScene.prototype,"StoreScene",["eui.UIComponent","egret.DisplayObject"]);